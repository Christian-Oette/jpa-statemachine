A quick implementation of an idea about a statemachine.

Before I found the solution from spring.
http://projects.spring.io/spring-statemachine/
